<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>School Routine & Attendance Manager</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="header">
        <div style="display: flex; align-items: center; gap: 1rem;">
            <button class="menu-toggle" onclick="toggleSidebar()">
                <i class="fas fa-bars"></i>
            </button>
            <div class="logo">
                <i class="fas fa-graduation-cap"></i>
                <span>SchoolSync Pro</span>
            </div>
        </div>
        <div class="user-profile">
            <div class="user-avatar">AD</div>
            <span>Admin User</span>
        </div>
    </div>

    <div class="container">
        <nav class="sidebar" id="sidebar">
            <div class="nav-item active" onclick="switchTab('dashboard')">
                <i class="fas fa-home"></i>
                <span>Dashboard</span>
            </div>
            <div class="nav-item" onclick="switchTab('routine')">
                <i class="fas fa-calendar-alt"></i>
                <span>Routine Management</span>
            </div>
            <div class="nav-item" onclick="switchTab('attendance')">
                <i class="fas fa-user-check"></i>
                <span>Attendance & Substitution</span>
            </div>
            <div class="nav-item" onclick="switchTab('import')">
                <i class="fas fa-file-upload"></i>
                <span>Data Import</span>
            </div>
            <div class="nav-item" onclick="switchTab('teachers')">
                <i class="fas fa-chalkboard-teacher"></i>
                <span>Manage Teachers</span>
            </div>
        </nav>

        <main class="main-content">
            <!-- Dashboard Tab -->
            <div id="dashboard" class="tab-content active">
                <h1 style="margin-bottom: 2rem;">Dashboard Overview</h1>
                
                <div class="stats-grid">
                    <div class="stat-card primary">
                        <h3>Total Teachers</h3>
                        <div class="stat-value" id="totalTeachers">0</div>
                        <p>Active faculty members</p>
                    </div>
                    <div class="stat-card success">
                        <h3>Present Today</h3>
                        <div class="stat-value" id="presentToday">0</div>
                        <p>Currently available</p>
                    </div>
                    <div class="stat-card danger">
                        <h3>Absent Today</h3>
                        <div class="stat-value" id="absentToday">0</div>
                        <p>Requires attention</p>
                    </div>
                    <div class="stat-card warning">
                        <h3>Substitutions</h3>
                        <div class="stat-value" id="substitutions">0</div>
                        <p>Active assignments</p>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="openModal('attendanceModal')">
                        <i class="fas fa-check-circle"></i> Mark Attendance
                    </button>
                    <button class="btn btn-primary" onclick="openModal('classModal')">
                        <i class="fas fa-plus-circle"></i> Create Routine
                    </button>
                    <button class="btn btn-success" onclick="detectConflicts()">
                        <i class="fas fa-exclamation-triangle"></i> Detect Conflicts
                    </button>
                </div>

                <h2 style="margin-bottom: 1rem;">Today's Schedule</h2>
                <div class="timetable-grid">
                    <table>
                        <thead>
                            <tr>
                                <th>Time</th>
                                <th>Class</th>
                                <th>Subject</th>
                                <th>Teacher</th>
                                <th>Room</th>
                            </tr>
                        </thead>
                        <tbody id="todaySchedule">
                        </tbody>
                    </table>
                </div>

                <h2 style="margin: 2rem 0 1rem;">Recent Activity</h2>
                <div class="activity-feed" id="activityFeed">
                </div>
            </div>

            <!-- Routine Management Tab -->
            <div id="routine" class="tab-content">
                <h1 style="margin-bottom: 2rem;">Weekly Timetable</h1>
                
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="openModal('classModal')">
                        <i class="fas fa-plus-circle"></i> Add Class
                    </button>
                    <button class="btn btn-success" onclick="detectConflicts()">
                        <i class="fas fa-exclamation-triangle"></i> Detect Conflicts
                    </button>
                    <button class="btn btn-primary" onclick="saveRoutine()">
                        <i class="fas fa-save"></i> Save Routine
                    </button>
                </div>

                <div class="timetable-grid">
                    <table id="weeklyTimetable">
                        <thead>
                            <tr>
                                <th>Time</th>
                                <th>Monday</th>
                                <th>Tuesday</th>
                                <th>Wednesday</th>
                                <th>Thursday</th>
                                <th>Friday</th>
                            </tr>
                        </thead>
                        <tbody id="timetableBody">
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Attendance & Substitution Tab -->
            <div id="attendance" class="tab-content">
                <h1 style="margin-bottom: 2rem;">Teacher Attendance</h1>
                
                <div class="teacher-list" id="teacherList">
                </div>
            </div>

            <!-- Data Import Tab -->
            <div id="import" class="tab-content">
                <h1 style="margin-bottom: 2rem;">Import Data</h1>
                
                <div class="upload-area" id="uploadArea" onclick="document.getElementById('fileInput').click()">
                    <i class="fas fa-cloud-upload-alt" style="font-size: 3rem; color: var(--primary); margin-bottom: 1rem;"></i>
                    <h3>Drag & Drop Files Here</h3>
                    <p>or click to browse</p>
                    <p style="color: #64748b; margin-top: 1rem;">Supported formats: Excel (.xlsx, .xls), CSV, PDF, TXT</p>
                </div>
                <input type="file" id="fileInput" style="display: none;" accept=".xlsx,.xls,.csv,.pdf,.txt" onchange="handleFileUpload(event)">

                <div id="importPreview" style="margin-top: 2rem; display: none;">
                    <h2>Preview</h2>
                    <div class="timetable-grid">
                        <table>
                            <thead id="previewHeader"></thead>
                            <tbody id="previewBody"></tbody>
                        </table>
                    </div>
                    <div class="action-buttons" style="margin-top: 1rem;">
                        <button class="btn btn-primary" onclick="confirmImport()">
                            <i class="fas fa-check"></i> Confirm Import
                        </button>
                        <button class="btn btn-danger" onclick="cancelImport()">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                    </div>
                </div>
            </div>

            <!-- Manage Teachers Tab -->
            <div id="teachers" class="tab-content">
                <h1 style="margin-bottom: 2rem;">Manage Teachers</h1>
                
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="openModal('addTeacherModal')">
                        <i class="fas fa-user-plus"></i> Add New Teacher
                    </button>
                </div>

                <div class="timetable-grid">
                    <table>
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Branch</th>
                                <th>Subjects</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="teacherManagementList">
                        </tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>

    <!-- Add Class Modal -->
    <div class="modal" id="classModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add Class to Timetable</h2>
                <button class="close-modal" onclick="closeModal('classModal')">&times;</button>
            </div>
            <form onsubmit="addClass(event)">
                <div class="form-group">
                    <label>Day</label>
                    <select id="classDay" required>
                        <option value="Monday">Monday</option>
                        <option value="Tuesday">Tuesday</option>
                        <option value="Wednesday">Wednesday</option>
                        <option value="Thursday">Thursday</option>
                        <option value="Friday">Friday</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Time</label>
                    <select id="classTime" required>
                        <option value="9:00">9:00 AM</option>
                        <option value="10:00">10:00 AM</option>
                        <option value="11:00">11:00 AM</option>
                        <option value="12:00">12:00 PM</option>
                        <option value="13:00">1:00 PM</option>
                        <option value="14:00">2:00 PM</option>
                        <option value="15:00">3:00 PM</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Class</label>
                    <input type="text" id="className" placeholder="e.g., 10A" required>
                </div>
                <div class="form-group">
                    <label>Subject</label>
                    <select id="classSubject" required>
                        <option value="Physics">Physics</option>
                        <option value="Math">Math</option>
                        <option value="English">English</option>
                        <option value="Chemistry">Chemistry</option>
                        <option value="Biology">Biology</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Teacher</label>
                    <select id="classTeacher" required></select>
                </div>
                <div class="form-group">
                    <label>Room</label>
                    <input type="text" id="classRoom" placeholder="e.g., 301" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Add Class</button>
            </form>
        </div>
    </div>

    <!-- Substitute Modal -->
    <div class="modal" id="substituteModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Assign Substitute Teacher</h2>
                <button class="close-modal" onclick="closeModal('substituteModal')">&times;</button>
            </div>
            <div id="substituteContent">
            </div>
        </div>
    </div>

    <!-- Add Teacher Modal -->
    <div class="modal" id="addTeacherModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add New Teacher</h2>
                <button class="close-modal" onclick="closeModal('addTeacherModal')">&times;</button>
            </div>
            <form onsubmit="addTeacher(event)">
                <div class="form-group">
                    <label>Teacher Name</label>
                    <input type="text" id="teacherName" placeholder="e.g., Dr. John Smith" required>
                </div>
                <div class="form-group">
                    <label>Branch/Department</label>
                    <select id="teacherBranch" required>
                        <option value="Science">Science</option>
                        <option value="Commerce">Commerce</option>
                        <option value="Arts">Arts</option>
                        <option value="Mathematics">Mathematics</option>
                        <option value="Languages">Languages</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Subjects (Hold Ctrl/Cmd to select multiple)</label>
                    <select id="teacherSubjects" multiple required style="height: 120px;">
                        <option value="Physics">Physics</option>
                        <option value="Chemistry">Chemistry</option>
                        <option value="Biology">Biology</option>
                        <option value="Math">Mathematics</option>
                        <option value="English">English</option>
                        <option value="History">History</option>
                        <option value="Geography">Geography</option>
                        <option value="Accounts">Accounts</option>
                        <option value="Economics">Economics</option>
                        <option value="Computer Science">Computer Science</option>
                    </select>
                    <small style="color: #64748b; display: block; margin-top: 0.5rem;">
                        <i class="fas fa-info-circle"></i> Hold Ctrl (Windows) or Cmd (Mac) to select multiple subjects
                    </small>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">
                    <i class="fas fa-check"></i> Add Teacher
                </button>
            </form>
        </div>
    </div>

    <!-- Edit Teacher Modal -->
    <div class="modal" id="editTeacherModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Edit Teacher</h2>
                <button class="close-modal" onclick="closeModal('editTeacherModal')">&times;</button>
            </div>
            <form onsubmit="updateTeacher(event)">
                <input type="hidden" id="editTeacherId">
                <div class="form-group">
                    <label>Teacher Name</label>
                    <input type="text" id="editTeacherName" required>
                </div>
                <div class="form-group">
                    <label>Branch/Department</label>
                    <select id="editTeacherBranch" required>
                        <option value="Science">Science</option>
                        <option value="Commerce">Commerce</option>
                        <option value="Arts">Arts</option>
                        <option value="Mathematics">Mathematics</option>
                        <option value="Languages">Languages</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Subjects (Hold Ctrl/Cmd to select multiple)</label>
                    <select id="editTeacherSubjects" multiple required style="height: 120px;">
                        <option value="Physics">Physics</option>
                        <option value="Chemistry">Chemistry</option>
                        <option value="Biology">Biology</option>
                        <option value="Math">Mathematics</option>
                        <option value="English">English</option>
                        <option value="History">History</option>
                        <option value="Geography">Geography</option>
                        <option value="Accounts">Accounts</option>
                        <option value="Economics">Economics</option>
                        <option value="Computer Science">Computer Science</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">
                    <i class="fas fa-save"></i> Update Teacher
                </button>
            </form>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification">
        <i class="fas fa-check-circle" style="font-size: 1.5rem; color: var(--success);"></i>
        <span id="notificationText"></span>
    </div>
    <script src="script.js"></script>
</body>
</html>